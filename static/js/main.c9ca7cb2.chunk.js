(this["webpackJsonpenglish-bot"]=this["webpackJsonpenglish-bot"]||[]).push([[0],{85:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var o,r,i,a,c,s,l,d,p=n(1),b=n.n(p),u=n(43),x=n.n(u),g=n(2),h=n(12),m=n(3),j=n.p+"static/media/english.9c170a25.png",f=n.p+"static/media/left-arrow.903af5d7.png",O=n(31),v=n(13),y=n.p+"static/media/send.01c24b89.png",w=n(52),S=n.p+"static/media/bot-icon.cfbb308b.png",k=n(0),N=function(){return Object(k.jsx)(M,{children:Object(k.jsxs)(E,{children:[Object(k.jsx)(T,{}),Object(k.jsx)(T,{}),Object(k.jsx)(T,{})]})})},M=m.a.div(o||(o=Object(g.a)(["\n  background-color: #717171;\n  padding: 15px 20px;\n  border-radius: 20px;\n  border-bottom-left-radius: 2px;\n  width: fit-content;\n  margin: 0px 0px 20px 20px;\n"]))),E=m.a.ul(r||(r=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  list-style: none;\n  height: 17px;\n  padding: 0px;\n  margin: 0px;\n"]))),I=Object(m.b)(i||(i=Object(g.a)(["\n 0% {\n    transform: translateY(0px);\n    background-color:white;\n  }\n  28% {\n    transform: translateY(-7px);\n    background-color:#d9d8d8;\n  }\n  44% {\n    transform: translateY(0px);\n    background-color:#bbbaba;\n  }\n"]))),T=m.a.li(a||(a=Object(g.a)(["\n  background-color: white;\n  border-radius: 50%;\n  height: 7px;\n  margin-right: 4px;\n  vertical-align: middle;\n  width: 7px;\n  &:nth-child(1) {\n    animation-delay: 200ms;\n  }\n  &:nth-child(2) {\n    animation-delay: 300ms;\n  }\n  &:nth-child(3) {\n    animation-delay: 400ms;\n  }\n  animation: "," 1.8s infinite ease-in-out;\n"])),I),B=n(26),J=n.n(B);var Q,C,R,q,G,A,W,Y,L,F,H,_,z,D,P,U=function(e){var t=e.buttons,n=e.text,o=e.onBtnClick;return Object(k.jsxs)(K,{children:[Object(k.jsx)(V,{children:n}),Object(k.jsx)(X,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(k.jsx)(Z,{onClick:function(){o(e)},children:null===e||void 0===e?void 0:e.title},J()())}))})]})},K=m.a.div(c||(c=Object(g.a)(["\n  max-width: 300px;\n  text-align: center;\n"]))),V=m.a.h3(s||(s=Object(g.a)(["\n  margin: 0px;\n  /* background-color: #9b9b9b; */\n  background-color: #0073a5;\n  padding: 20px 0px;\n  border-top-left-radius: 20px;\n  border-top-right-radius: 20px;\n  color: white;\n  border: 1px solid #f0f0f0;\n"]))),X=m.a.ul(l||(l=Object(g.a)(["\n  padding: 0px;\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 0px;\n  border: 1px solid #f0f0f0;\n  border-bottom-left-radius: 20px;\n  border-bottom-right-radius: 20px;\n"]))),Z=m.a.li(d||(d=Object(g.a)(["\n  border-bottom: 1px solid #f0f0f0;\n  width: 100%;\n  padding: 10px 0px;\n  color: #9b9b9b;\n  cursor: pointer;\n  &:hover {\n    color: #0073a5;\n  }\n  &:last-child {\n    border-bottom: none;\n  }\n"]))),$=Object(w.a)("wss://english-bot-test.herokuapp.com/"),ee=["You are too close , but the write answer is {ANSWER}","The correct answer is {ANSWER}","{ANSWER} this is the correct"," Oh sorry , the write answer is {ANSWER}"],te=["You are right \ud83e\udd29","you are too good","great \ud83d\udc4f","Nice \ud83d\ude01\ud83d\ude01","You are right \u2705 "],ne=["Happy end","See you later\ud83d\ude4b\u200d\u2640\ufe0f"," Peace out\ud83e\udd73"," It was nice to see you again\ud83d\ude4b\u200d\u2640\ufe0f","Take care","I look forward to our next dialogue","Good bye","Bye bye!\ud83d\udc4b","Have a nice day","Goodnight","I\u2019m out of here","\ud83e\udd73"],oe=function(){var e,t,n,o,r,i,a,c,s,l=Object(p.useRef)(),d=Object(p.useState)((null===(e=JSON.parse(localStorage.getItem("bot")))||void 0===e?void 0:e.questionNo)||0),b=Object(h.a)(d,2),u=b[0],x=b[1],g=Object(p.useState)((null!==(t=null===(n=JSON.parse(localStorage.getItem("bot")))||void 0===n?void 0:n.modelNo)&&void 0!==t?t:!(null===(o=JSON.parse(localStorage.getItem("doneBefore")))||void 0===o?void 0:o.flag))?Math.floor(3*Math.random()):0),m=Object(h.a)(g,2),j=m[0],f=m[1],w=Object(p.useState)((null===(r=JSON.parse(localStorage.getItem("messages")))||void 0===r?void 0:r.messages)||[]),M=Object(h.a)(w,2),E=M[0],I=M[1],T=Object(p.useState)({text:""}),B=Object(h.a)(T,2),Q=B[0],C=B[1],R=Object(p.useState)(null===(i=null===(a=JSON.parse(localStorage.getItem("bot")))||void 0===a?void 0:a.typing)||void 0===i||i),q=Object(h.a)(R,2),G=q[0],A=q[1],W=Object(p.useState)((null===(c=JSON.parse(localStorage.getItem("bot")))||void 0===c?void 0:c.botMsg)||{}),Y=Object(h.a)(W,2),L=Y[0],F=Y[1],H=Object(p.useState)((null===(s=JSON.parse(localStorage.getItem("bot")))||void 0===s?void 0:s.currentQuestionType)||"intro"),_=Object(h.a)(H,2),z=_[0],D=_[1];Object(p.useEffect)((function(){localStorage.setItem("bot",JSON.stringify({questionNo:u,currentQuestionType:z,botMsg:L,typing:G,modelNo:j}))}),[u,z,L,G,j]),Object(p.useEffect)((function(){localStorage.setItem("messages",JSON.stringify({messages:E}))}),[E]),Object(p.useEffect)((function(){0===E.length&&setTimeout((function(){$.emit("getIntroQuestion",{questionNo:u}),$.on("responseIntroQuestion",(function(e){var t=e.message,n=e.last;I([].concat(Object(v.a)(E),[{from:"English BOT",text:t.text}])),n||x(u+1),A(!1)}))}),2e3)}),[]),Object(p.useEffect)((function(){"model"===z&&($.off("checkGrammerResult"),$.on("checkGrammerResult",(function(e){var t=e.message,n=e.result,o=n.result,r=n.corrections;0===(null===r||void 0===r?void 0:r.length)||(null===t||void 0===t?void 0:t.toLowerCase().replace(/\ /g,""))===(null===o||void 0===o?void 0:o.toLocaleLowerCase().replace(/\ /g,""))?(A(!1),I([].concat(Object(v.a)(E),[{from:"English BOT",text:te[Math.floor(Math.random()*(te.length-1))],type:null===t||void 0===t?void 0:t.type,buttons:null===t||void 0===t?void 0:t.buttons}]))):(A(!1),I([].concat(Object(v.a)(E),[{from:"English BOT",text:"\n              ".concat(ee[Math.floor(Math.random()*(ee.length-1))].replace("{ANSWER}","<strong>".concat(o,"</strong>")),"\n              "),type:null===t||void 0===t?void 0:t.type,buttons:null===t||void 0===t?void 0:t.buttons}]))),L.last?$.emit("getEndQuestion",{}):$.emit("getModelQuestion",{questionNo:u,modelNo:j})}))),D(z),$.off("responseIntroQuestion"),$.off("responseModelQuestion"),$.on("responseIntroQuestion",(function(e){var t=e.message,n=e.last;I([].concat(Object(v.a)(E),[{from:"English BOT",text:t.text,type:null===t||void 0===t?void 0:t.type,buttons:null===t||void 0===t?void 0:t.buttons}])),F({message:t,last:n}),n||x(u+1),A(!1)})),$.on("responseModelQuestion",(function(e){var t=e.message,n=e.last;I([].concat(Object(v.a)(E),[{from:"English BOT",text:t.text,type:null===t||void 0===t?void 0:t.type,buttons:null===t||void 0===t?void 0:t.buttons}])),F({message:t,last:n}),n?(I([].concat(Object(v.a)(E),[{from:"English BOT",text:ne[Math.floor(Math.random()*(ne.length-1))]}])),!JSON.parse(localStorage.getItem("doneBefore")).flag&&j<2?(f(j+1),x(0)):(JSON.parse(localStorage.getItem("doneBefore")).flag||2!==j||localStorage.setItem("doneBefore",JSON.stringify({flag:!0})),D("end"))):x(u+1),A(!1)})),l.current.addEventListener("DOMNodeInserted",(function(e){var t=e.currentTarget;t.scroll({top:t.scrollHeight,behavior:"smooth"})}))}),[E,u,Q.text,z,j,L.last]);var P=function(e){I([].concat(Object(v.a)(E),[{from:"Me",text:e.title}])),setTimeout((function(){if(A(!1),!0===e.correct)I([].concat(Object(v.a)(E),[{from:"Me",text:e.title},{from:"English BOT",text:te[Math.floor(Math.random()*(te.length-1))],type:null===e||void 0===e?void 0:e.type,buttons:null===e||void 0===e?void 0:e.buttons}]));else{var t,n=null===(t=L.message.buttons.find((function(e){return!0===e.correct})))||void 0===t?void 0:t.title;console.log(L.message.buttons),I([].concat(Object(v.a)(E),[{from:"Me",text:e.title},{from:"English BOT",text:"\n            ".concat(ee[Math.floor(Math.random()*(ee.length-1))].replace("{ANSWER}","<strong>".concat(n,"</strong>")),"\n            "),type:null===e||void 0===e?void 0:e.type,buttons:null===e||void 0===e?void 0:e.buttons}]))}L.last?$.emit("getEndQuestion",{}):$.emit("getModelQuestion",{questionNo:u,modelNo:j})}),1e3)};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ie,{ref:l,children:E.map((function(e,t){var n=e.from,o=e.text,r=e.type,i=e.buttons;return Object(k.jsx)(k.Fragment,{children:"English BOT"===n?Object(k.jsxs)(ae,{children:[Object(k.jsx)("img",{src:S,alt:" "}),"@message-type/button"===r?Object(k.jsx)(U,{buttons:i,text:o,setMessages:I,messages:E,socket:$,onBtnClick:P}):Object(k.jsx)("span",{dangerouslySetInnerHTML:{__html:"\n                    <style>\n                    strong{\n                      color: #74eaf4;\n                    }\n                    </style>\n                    <div>".concat(o,"</div>\n                    ")}})]},J()()):Object(k.jsx)(ce,{children:Object(k.jsx)("span",{children:o})},t)})}))}),G&&Object(k.jsx)(N,{}),Object(k.jsxs)(re,{onSubmit:function(e){return function(e){var t,n;e.preventDefault(),I([].concat(Object(v.a)(E),[{from:"Me",text:Q.text}])),A(!0),(null===L||void 0===L||null===(t=L.message)||void 0===t||null===(n=t.response)||void 0===n?void 0:n.length)>0&&"intro"===z&&setTimeout((function(){var e=L.message.response[Math.floor(Math.random()*(L.message.response.length-1))];I([].concat(Object(v.a)(E),[{from:"Me",text:Q.text},{from:"English BOT",text:e}])),L.last?(x(0),$.emit("getModelQuestion",{questionNo:u,modelNo:j}),F({}),D("model")):(A(!0),$.emit("getIntroQuestion",{questionNo:u}))}),1e3),"model"===z&&($.emit("checkGrammer",Object(O.a)(Object(O.a)({},Q),{},{_id:L.message._id})),F({})),C({text:""})}(e)},children:[Object(k.jsx)("input",{value:Q.text,onChange:function(e){return C({text:e.target.value})},type:"text",placeholder:"send a message..."}),Object(k.jsx)("button",{type:"submit",children:Object(k.jsx)("img",{src:y,alt:""})})]})]})},re=m.a.form(Q||(Q=Object(g.a)(["\n  display: flex;\n  width: 100%;\n  border-top: 1px solid rgb(230, 230, 230);\n  input {\n    border: none;\n    height: 40px;\n    width: 80%;\n    padding: 10px 20px;\n    outline: 0;\n  }\n  button {\n    border: none;\n    background-color: white;\n    width: 18%;\n    display: flex;\n    justify-content: end;\n    align-items: center;\n    img {\n      width: 32px;\n      height: 32px;\n    }\n  }\n"]))),ie=m.a.div(C||(C=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  max-height: 400px;\n  min-height: 400px;\n  background: white;\n  overflow-y: auto;\n  padding: 15px 20px;\n  span {\n    width: fit-content;\n    height: fit-content;\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n    border-bottom-right-radius: 10px;\n    margin-bottom: 10px;\n  }\n"]))),ae=m.a.div(R||(R=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  span {\n    background-color: #9b9b9b;\n    color: white;\n    padding: 10px;\n  }\n  img {\n    width: 40px;\n    height: 40px;\n    margin-right: 10px;\n  }\n"]))),ce=m.a.div(q||(q=Object(g.a)(["\n  margin-left: auto;\n  span {\n    display: block;\n    background-color: #0073a5;\n    color: white;\n    margin-left: 10px;\n    padding: 10px;\n  }\n"]))),se=(m.a.div(G||(G=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  strong {\n    /* display: inline-block; */\n    color: #74eaf4;\n    margin: 0px 0px 0px 10px;\n  }\n"]))),function(){var e=Object(p.useState)(!1),t=Object(h.a)(e,2),n=t[0],o=t[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(be,{children:Object(k.jsxs)(le,{children:[n&&Object(k.jsx)(de,{onClick:function(){return o(!1)},src:f,alt:""}),Object(k.jsxs)(ue,{children:[Object(k.jsx)(pe,{src:j,alt:""}),Object(k.jsx)("span",{children:" English Bot "})]}),Object(k.jsx)("p",{children:"I can help you to improve your english."})]})}),Object(k.jsx)(le,{children:Object(k.jsxs)(xe,{children:[!n&&Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(ge,{children:[Object(k.jsx)("h3",{children:"Get Started"}),Object(k.jsxs)("div",{children:[Object(k.jsx)("span",{className:"replyNote",children:"My usual reply time"}),Object(k.jsx)("br",{}),Object(k.jsx)("span",{className:"replyTome",children:"\ud83d\udd53 Under 1 min"})]}),Object(k.jsxs)(he,{children:[Object(k.jsx)(me,{onClick:function(){return o(!0)},children:"Get Started"}),Object(k.jsx)(je,{onClick:function(){localStorage.removeItem("messages"),localStorage.removeItem("bot"),o(!0)},children:"Reset"})]})]})}),n&&Object(k.jsx)(oe,{})]})})]})}),le=m.a.div(A||(A=Object(g.a)(["\n  padding: 0px 25px;\n"]))),de=m.a.img(W||(W=Object(g.a)(["\n  width: 20px;\n  height: 20px;\n  margin: 0px 10px 20px 0px;\n  cursor: pointer;\n"]))),pe=m.a.img(Y||(Y=Object(g.a)(["\n  width: 50px;\n  height: 50px;\n  margin-right: 10px;\n"]))),be=m.a.div(L||(L=Object(g.a)(["\n  color: white;\n  background-color: #14243d;\n  padding: 40px 20px 100px 20px;\n  p {\n    font-size: 20px;\n  }\n"]))),ue=m.a.h1(F||(F=Object(g.a)(["\n  margin: 10px 0px 0px 0px;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n"]))),xe=m.a.div(H||(H=Object(g.a)(["\n  margin: -70px 0px 0px 0px;\n  background-color: white;\n  border-radius: 5px;\n  box-shadow: rgb(0 0 0 / 10%) 0px 4px 15px 0px,\n    rgb(0 0 0 / 10%) 0px 1px 2px 0px, rgb(32 43 57 / 50%) 0px -2px 0px 0px;\n  display: flex;\n  flex-direction: column;\n"]))),ge=m.a.div(_||(_=Object(g.a)(["\n  padding: 15px 20px;\n  .replyNote {\n    color: gray;\n    margin: 0px 0px 5px 0px;\n  }\n  .replyTome {\n    font-weight: bold;\n  }\n"]))),he=m.a.div(z||(z=Object(g.a)(["\n  display: flex;\n"]))),me=m.a.button(D||(D=Object(g.a)(["\n  border: none;\n  background-color: #0695d5;\n  color: white;\n  padding: 15px 20px;\n  border-radius: 30px;\n  font-weight: 600;\n  font-size: 16px;\n  cursor: pointer;\n  width: 200px;\n  margin: 30px 0px 40px 0px;\n  transition: background-color 0.1s ease-in;\n  margin-right: 20px;\n  &:hover {\n    background-color: #bc6a39;\n  }\n"]))),je=m.a.button(P||(P=Object(g.a)(["\n  border: none;\n  background-color: #a00b0b;\n  color: white;\n  padding: 15px 20px;\n  border-radius: 30px;\n  font-weight: 600;\n  font-size: 16px;\n  cursor: pointer;\n  width: 200px;\n  margin: 30px 0px 40px 0px;\n  transition: background-color 0.1s ease-in;\n"]))),fe=n(30),Oe=n.n(fe),ve=n(50),ye=n(51),we=n.n(ye),Se=b.a.createContext(),ke=function(e){var t=e.children,n=Object(p.useState)({}),o=Object(h.a)(n,2),r=o[0],i=o[1],a=function(){var e=Object(ve.a)(Oe.a.mark((function e(){var t,n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we.a.get("https://english-bot-test.herokuapp.com/api/bot-flow");case 2:t=e.sent,n=t.data,i(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.useEffect)((function(){a()}),[]),Object(k.jsx)(Se.Provider,{value:r,children:t})},Ne=function(){return Object(k.jsx)(ke,{children:Object(k.jsx)(se,{})})};n(85);x.a.render(Object(k.jsx)(Ne,{}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.c9ca7cb2.chunk.js.map