{"version":3,"sources":["images/english.png","images/left-arrow.png","images/send.png","images/bot-icon.png","components/Typing.js","components/MessageWithButton.js","components/Chat.js","components/Bot.js","contexts/dataContext.js","App.js","index.js"],"names":["Typing","TypingDiv","DotesContainer","Dot","styled","div","ul","typingAnimation","keyframes","li","MessageWithButton","buttons","text","onBtnClick","Card","StyledH3","StyledUl","map","btn","StyledLi","onClick","title","h3","socket","io","feedbackCorrection","feedbackRight","Chat","ref","useRef","useState","questionNo","setQuestionNo","Math","floor","random","modelNo","messages","setMessages","msg","setMsg","typing","setTyping","botMsg","setBotMsg","currentQuestionType","setCurrentQuestionType","useEffect","length","setTimeout","emit","on","message","last","from","off","checkResult","result","corrections","toLowerCase","replace","toLocaleLowerCase","type","StyledCorrectDiv","dangerouslySetInnerHTML","__html","console","log","current","addEventListener","event","target","currentTarget","scroll","top","scrollHeight","behavior","correct","find","StyledMessages","index","StyledBotDiv","src","botIcon","alt","StyledMeDiv","StyledDiv","onSubmit","e","preventDefault","response","sendMsgSubmit","value","onChange","placeholder","send","form","Bot","active","setActive","Header","Container","StyledBackImg","leftArrow","StyledH1","StyledBotImg","englishBot","Content","className","img","h1","Context","React","createContext","DataContext","children","newData","setNewData","fetchData","a","axios","get","data","Provider","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e136a20c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/english.9c170a25.png\";","export default __webpack_public_path__ + \"static/media/left-arrow.903af5d7.png\";","export default __webpack_public_path__ + \"static/media/send.01c24b89.png\";","export default __webpack_public_path__ + \"static/media/bot-icon.cfbb308b.png\";","import React from \"react\";\r\nimport styled, { keyframes } from \"styled-components\";\r\n\r\nconst Typing = () => {\r\n  return (\r\n    <TypingDiv>\r\n      <DotesContainer>\r\n        <Dot />\r\n        <Dot />\r\n        <Dot />\r\n      </DotesContainer>\r\n    </TypingDiv>\r\n  );\r\n};\r\n\r\nexport default Typing;\r\n\r\nconst TypingDiv = styled.div`\r\n  background-color: #717171;\r\n  padding: 15px 20px;\r\n  border-radius: 20px;\r\n  border-bottom-left-radius: 2px;\r\n  width: fit-content;\r\n  margin: 0px 0px 20px 20px;\r\n`;\r\n\r\nconst DotesContainer = styled.ul`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  list-style: none;\r\n  height: 17px;\r\n  padding: 0px;\r\n  margin: 0px;\r\n`;\r\n\r\nconst typingAnimation = keyframes`\r\n 0% {\r\n    transform: translateY(0px);\r\n    background-color:white;\r\n  }\r\n  28% {\r\n    transform: translateY(-7px);\r\n    background-color:#d9d8d8;\r\n  }\r\n  44% {\r\n    transform: translateY(0px);\r\n    background-color:#bbbaba;\r\n  }\r\n`;\r\n\r\nconst Dot = styled.li`\r\n  background-color: white;\r\n  border-radius: 50%;\r\n  height: 7px;\r\n  margin-right: 4px;\r\n  vertical-align: middle;\r\n  width: 7px;\r\n  &:nth-child(1) {\r\n    animation-delay: 200ms;\r\n  }\r\n  &:nth-child(2) {\r\n    animation-delay: 300ms;\r\n  }\r\n  &:nth-child(3) {\r\n    animation-delay: 400ms;\r\n  }\r\n  animation: ${typingAnimation} 1.8s infinite ease-in-out;\r\n`;\r\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nfunction MessageWithButton({ buttons, text, onBtnClick }) {\n  return (\n    <Card>\n      <StyledH3>{text}</StyledH3>\n      <StyledUl>\n        {buttons?.map((btn) => (\n          <StyledLi\n            onClick={() => {\n              onBtnClick(btn);\n            }}\n          >\n            {btn.title}\n          </StyledLi>\n        ))}\n      </StyledUl>\n    </Card>\n  );\n}\n\nexport default MessageWithButton;\n\nconst Card = styled.div`\n  max-width: 300px;\n  text-align: center;\n`;\nconst StyledH3 = styled.h3`\n  margin: 0px;\n  /* background-color: #9b9b9b; */\n  background-color: #0073a5;\n  padding: 20px 0px;\n  border-top-left-radius: 20px;\n  border-top-right-radius: 20px;\n  color: white;\n  border: 1px solid #f0f0f0;\n`;\nconst StyledUl = styled.ul`\n  padding: 0px;\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 0px;\n  border: 1px solid #f0f0f0;\n  border-bottom-left-radius: 20px;\n  border-bottom-right-radius: 20px;\n`;\nconst StyledLi = styled.li`\n  border-bottom: 1px solid #f0f0f0;\n  width: 100%;\n  padding: 10px 0px;\n  color: #9b9b9b;\n  cursor: pointer;\n  &:hover {\n    color: #0073a5;\n  }\n  &:last-child {\n    border-bottom: none;\n  }\n`;\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport send from \"../images/send.png\";\r\nimport { io } from \"socket.io-client\";\r\nimport botIcon from \"../images/bot-icon.png\";\r\nimport Typing from \"./Typing\";\r\nimport MessageWithButton from \"./MessageWithButton\";\r\n\r\nconst socket = io(\"wss://english-bot-test.herokuapp.com/\");\r\n\r\n// eslint-disable-next-line no-sparse-arrays\r\nconst feedbackCorrection = [\r\n  \"You are too close , but the write answer is {ANSWER}\",\r\n  \"The correct answer is {ANSWER}\",\r\n  \"{ANSWER} this is the correct\",\r\n  \" Oh sorry , the write answer is {ANSWER}\",\r\n];\r\n\r\nconst feedbackRight = [\r\n  \"You are right 🤩\",\r\n  \"you are too good\",\r\n  \"great 👏\",\r\n  \"Nice 😁😁\",\r\n  \"You are right ✅ \",\r\n];\r\n\r\nconst Chat = () => {\r\n  const ref = useRef();\r\n\r\n  const [questionNo, setQuestionNo] = useState(0);\r\n  const [modelNo, setModelNo] = useState(Math.floor(Math.random() * 3));\r\n  const [messages, setMessages] = useState([]);\r\n  const [msg, setMsg] = useState({ text: \"\" });\r\n  const [typing, setTyping] = useState(true);\r\n  const [botMsg, setBotMsg] = useState({});\r\n  const [currentQuestionType, setCurrentQuestionType] = useState(\"intro\");\r\n\r\n  const scrollToBottom = () => {\r\n    ref.current.addEventListener(\"DOMNodeInserted\", (event) => {\r\n      const { currentTarget: target } = event;\r\n      target.scroll({ top: target.scrollHeight, behavior: \"smooth\" });\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (messages.length === 0) {\r\n      setTimeout(() => {\r\n        socket.emit(\"getIntroQuestion\", { questionNo });\r\n        socket.on(\"responseIntroQuestion\", ({ message, last }) => {\r\n          setMessages([\r\n            ...messages,\r\n            { from: \"English BOT\", text: message.text },\r\n          ]);\r\n          if (!last) {\r\n            setQuestionNo(questionNo + 1);\r\n          }\r\n          setTyping(false);\r\n        });\r\n      }, 2000);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (currentQuestionType === \"model\") {\r\n      socket.off(\"checkGrammerResult\");\r\n      socket.on(\"checkGrammerResult\", ({ message, result: checkResult }) => {\r\n        const { result, corrections } = checkResult;\r\n        if (\r\n          corrections?.length === 0 ||\r\n          message?.toLowerCase().replace(/\\ /g, \"\") ===\r\n            result?.toLocaleLowerCase().replace(/\\ /g, \"\")\r\n        ) {\r\n          setTyping(false);\r\n          setMessages([\r\n            ...messages,\r\n            {\r\n              from: \"English BOT\",\r\n              text: feedbackRight[\r\n                Math.floor(Math.random() * (feedbackRight.length - 1))\r\n              ],\r\n              type: message?.type,\r\n              buttons: message?.buttons,\r\n            },\r\n          ]);\r\n          if (!botMsg.last) {\r\n            socket.emit(\"getModelQuestion\", { questionNo, modelNo });\r\n          } else {\r\n            socket.emit(\"getEndQuestion\", {});\r\n          }\r\n          return;\r\n        }\r\n        setTyping(false);\r\n        setMessages([\r\n          ...messages,\r\n          {\r\n            from: \"English BOT\",\r\n            text: (\r\n              <StyledCorrectDiv>\r\n                <div\r\n                  dangerouslySetInnerHTML={{\r\n                    __html: `<div>\r\n                ${feedbackCorrection[\r\n                  Math.floor(Math.random() * (feedbackCorrection.length - 1))\r\n                ].replace(\"{ANSWER}\", `<h4>${result}</h4>`)}\r\n                </div>`,\r\n                  }}\r\n                ></div>\r\n              </StyledCorrectDiv>\r\n            ),\r\n            type: message?.type,\r\n            buttons: message?.buttons,\r\n          },\r\n        ]);\r\n      });\r\n    }\r\n\r\n    setCurrentQuestionType(currentQuestionType);\r\n\r\n    // close the older listener then open new one\r\n    socket.off(\"responseIntroQuestion\");\r\n    socket.off(\"responseModelQuestion\");\r\n\r\n    socket.on(\"responseIntroQuestion\", ({ message, last }) => {\r\n      setMessages([\r\n        ...messages,\r\n        {\r\n          from: \"English BOT\",\r\n          text: message.text,\r\n          type: message?.type,\r\n          buttons: message?.buttons,\r\n        },\r\n      ]);\r\n      setBotMsg({ message, last });\r\n      if (!last) {\r\n        setQuestionNo(questionNo + 1);\r\n      }\r\n      setTyping(false);\r\n    });\r\n\r\n    socket.on(\"responseModelQuestion\", ({ message, last }) => {\r\n      setMessages([\r\n        ...messages,\r\n        {\r\n          from: \"English BOT\",\r\n          text: message.text,\r\n          type: message?.type,\r\n          buttons: message?.buttons,\r\n        },\r\n      ]);\r\n      console.log(message);\r\n      setBotMsg({ message, last });\r\n      if (!last) {\r\n        setQuestionNo(questionNo + 1);\r\n      }\r\n      setTyping(false);\r\n    });\r\n\r\n    scrollToBottom();\r\n  }, [messages, questionNo, msg.text, currentQuestionType]);\r\n\r\n  const sendMsgSubmit = (e) => {\r\n    e.preventDefault();\r\n    setMessages([...messages, { from: \"Me\", text: msg.text }]);\r\n    setTyping(true);\r\n    if (\r\n      botMsg?.message?.response?.length > 0 &&\r\n      currentQuestionType === \"intro\"\r\n    ) {\r\n      setTimeout(() => {\r\n        const response =\r\n          botMsg.message.response[\r\n            Math.floor(Math.random() * (botMsg.message.response.length - 1))\r\n          ];\r\n        setMessages([\r\n          ...messages,\r\n          { from: \"Me\", text: msg.text },\r\n          { from: \"English BOT\", text: response },\r\n        ]);\r\n        if (!botMsg.last) {\r\n          setTyping(true);\r\n          socket.emit(\"getIntroQuestion\", { questionNo });\r\n        } else {\r\n          setQuestionNo(0);\r\n          socket.emit(\"getModelQuestion\", { questionNo, modelNo });\r\n          setBotMsg({});\r\n          setCurrentQuestionType(\"model\");\r\n        }\r\n      }, 1000);\r\n    }\r\n    if (currentQuestionType === \"model\") {\r\n      socket.emit(\"checkGrammer\", msg);\r\n      setBotMsg({});\r\n    }\r\n    setMsg({ text: \"\" });\r\n  };\r\n\r\n  const onBtnClick = (message) => {\r\n    setMessages([...messages, { from: \"Me\", text: message.title }]);\r\n    setTimeout(() => {\r\n      setTyping(false);\r\n      if (message.correct === true) {\r\n        setMessages([\r\n          ...messages,\r\n          { from: \"Me\", text: message.title },\r\n          {\r\n            from: \"English BOT\",\r\n            text: feedbackRight[\r\n              Math.floor(Math.random() * (feedbackRight.length - 1))\r\n            ],\r\n            type: message?.type,\r\n            buttons: message?.buttons,\r\n          },\r\n        ]);\r\n      } else {\r\n        const result = botMsg.message.buttons.find(\r\n          (btn) => btn.correct === true\r\n        ).title;\r\n        console.log(\":::::::\", botMsg.message);\r\n        setMessages([\r\n          ...messages,\r\n          { from: \"Me\", text: message.title },\r\n          {\r\n            from: \"English BOT\",\r\n            text: (\r\n              <StyledCorrectDiv>\r\n                <div\r\n                  dangerouslySetInnerHTML={{\r\n                    __html: `<div>\r\n              ${feedbackCorrection[\r\n                Math.floor(Math.random() * (feedbackCorrection.length - 1))\r\n              ].replace(\"{ANSWER}\", `<h4>${result}</h4>`)}\r\n              </div>`,\r\n                  }}\r\n                ></div>\r\n              </StyledCorrectDiv>\r\n            ),\r\n            type: message?.type,\r\n            buttons: message?.buttons,\r\n          },\r\n        ]);\r\n      }\r\n      if (!botMsg.last) {\r\n        socket.emit(\"getModelQuestion\", { questionNo, modelNo });\r\n      } else {\r\n        socket.emit(\"getEndQuestion\", {});\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <StyledMessages ref={ref}>\r\n        {messages.map(({ from, text, type, buttons }, index) => (\r\n          <>\r\n            {from === \"English BOT\" ? (\r\n              <StyledBotDiv key={index}>\r\n                <img src={botIcon} alt=\" \" />\r\n\r\n                {type === \"@message-type/button\" ? (\r\n                  <MessageWithButton\r\n                    buttons={buttons}\r\n                    text={text}\r\n                    setMessages={setMessages}\r\n                    messages={messages}\r\n                    socket={socket}\r\n                    onBtnClick={onBtnClick}\r\n                  />\r\n                ) : (\r\n                  <span>{text}</span>\r\n                )}\r\n              </StyledBotDiv>\r\n            ) : (\r\n              <StyledMeDiv key={index}>\r\n                <span>{text}</span>\r\n              </StyledMeDiv>\r\n            )}\r\n          </>\r\n        ))}\r\n      </StyledMessages>\r\n      {typing && <Typing />}\r\n      <StyledDiv onSubmit={(e) => sendMsgSubmit(e)}>\r\n        <input\r\n          value={msg.text}\r\n          onChange={(e) => setMsg({ text: e.target.value })}\r\n          type=\"text\"\r\n          placeholder=\"send a message...\"\r\n        />\r\n        <button type=\"submit\">\r\n          <img src={send} alt=\"\" />\r\n        </button>\r\n      </StyledDiv>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n\r\nconst StyledDiv = styled.form`\r\n  display: flex;\r\n  width: 100%;\r\n  border-top: 1px solid rgb(230, 230, 230);\r\n  input {\r\n    border: none;\r\n    height: 40px;\r\n    width: 80%;\r\n    padding: 10px 20px;\r\n    outline: 0;\r\n  }\r\n  button {\r\n    border: none;\r\n    background-color: white;\r\n    width: 18%;\r\n    display: flex;\r\n    justify-content: end;\r\n    align-items: center;\r\n    img {\r\n      width: 32px;\r\n      height: 32px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst StyledMessages = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  max-height: 400px;\r\n  min-height: 400px;\r\n  background: white;\r\n  overflow-y: auto;\r\n  padding: 15px 20px;\r\n  span {\r\n    width: fit-content;\r\n    height: fit-content;\r\n    border-top-left-radius: 10px;\r\n    border-top-right-radius: 10px;\r\n    border-bottom-right-radius: 10px;\r\n    margin-bottom: 10px;\r\n  }\r\n`;\r\n\r\nconst StyledBotDiv = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  span {\r\n    background-color: #9b9b9b;\r\n    color: white;\r\n    padding: 10px;\r\n  }\r\n  img {\r\n    width: 40px;\r\n    height: 40px;\r\n    margin-right: 10px;\r\n  }\r\n`;\r\n\r\nconst StyledMeDiv = styled.div`\r\n  margin-left: auto;\r\n  span {\r\n    display: block;\r\n    background-color: #0073a5;\r\n    color: white;\r\n    margin-left: 10px;\r\n    padding: 10px;\r\n  }\r\n`;\r\n\r\nconst StyledCorrectDiv = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  h4 {\r\n    display: inline-block;\r\n    color: #74eaf4;\r\n    margin: 0px 0px 0px 10px;\r\n  }\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport englishBot from \"../images/english.png\";\r\nimport leftArrow from \"../images/left-arrow.png\";\r\nimport Chat from \"./Chat\";\r\n\r\nconst Bot = () => {\r\n  const [active, setActive] = useState(false);\r\n  return (\r\n    <>\r\n      <Header>\r\n        <Container>\r\n          {active && (\r\n            <StyledBackImg\r\n              onClick={() => setActive(false)}\r\n              src={leftArrow}\r\n              alt=\"\"\r\n            />\r\n          )}\r\n\r\n          <StyledH1>\r\n            <StyledBotImg src={englishBot} alt=\"\" />\r\n            <span> English Bot </span>\r\n          </StyledH1>\r\n          <p>I can help you to improve your english.</p>\r\n        </Container>\r\n      </Header>\r\n      <Container>\r\n        <Content>\r\n          {!active && (\r\n            <StyledDiv>\r\n              <h3>Get Started</h3>\r\n              <div>\r\n                <span className=\"replyNote\">My usual reply time</span>\r\n                <br />\r\n                <span className=\"replyTome\">🕓 Under 1 min</span>\r\n              </div>\r\n              <button onClick={() => setActive(true)}>Get Started</button>\r\n            </StyledDiv>\r\n          )}\r\n          {active && <Chat />}\r\n        </Content>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Bot;\r\n\r\n//styles\r\nconst Container = styled.div`\r\n  padding: 0px 25px;\r\n`;\r\n\r\nconst StyledBackImg = styled.img`\r\n  width: 20px;\r\n  height: 20px;\r\n  margin: 0px 10px 20px 0px;\r\n  cursor: pointer;\r\n`;\r\nconst StyledBotImg = styled.img`\r\n  width: 50px;\r\n  height: 50px;\r\n  margin-right: 10px;\r\n`;\r\nconst Header = styled.div`\r\n  color: white;\r\n  background-color: #14243d;\r\n  padding: 40px 20px 100px 20px;\r\n  p {\r\n    font-size: 20px;\r\n  }\r\n`;\r\n\r\nconst StyledH1 = styled.h1`\r\n  margin: 10px 0px 0px 0px;\r\n  font-weight: 500;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  margin: -70px 0px 0px 0px;\r\n  background-color: white;\r\n  border-radius: 5px;\r\n  box-shadow: rgb(0 0 0 / 10%) 0px 4px 15px 0px,\r\n    rgb(0 0 0 / 10%) 0px 1px 2px 0px, rgb(32 43 57 / 50%) 0px -2px 0px 0px;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst StyledDiv = styled.div`\r\n  padding: 15px 20px;\r\n  .replyNote {\r\n    color: gray;\r\n    margin: 0px 0px 5px 0px;\r\n  }\r\n  .replyTome {\r\n    font-weight: bold;\r\n  }\r\n  button {\r\n    border: none;\r\n    background-color: #763c1a;\r\n    color: white;\r\n    padding: 15px 20px;\r\n    border-radius: 30px;\r\n    font-weight: 600;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    width: 200px;\r\n    margin: 30px 0px 40px 0px;\r\n    transition: background-color 0.1s ease-in;\r\n    &:hover {\r\n      background-color: #bc6a39;\r\n    }\r\n  }\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\n//here we create context object\r\nconst Context = React.createContext();\r\n\r\nexport const DataContext = ({ children }) => {\r\n  const [newData, setNewData] = useState({});\r\n  const fetchData = async () => {\r\n    // const { data } = await axios.get(`/api/bot/${window.botSettings.id}`);\r\n    // const { data } = await axios.get(\r\n    //   `https://chat-plugv1.herokuapp.com/api/bot/614e63e0632c5bf001304b56?fbclid=IwAR2yTQqEV0CooA_1o3IUj0GyUgRTx00PpYFA9V_dBBphDn7wDowCsX6ZVVA`\r\n    // );\r\n    const { data } = await axios.get(\r\n      \"https://english-bot-test.herokuapp.com/api/bot-flow\"\r\n    );\r\n    setNewData(data);\r\n  };\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  return <Context.Provider value={newData}>{children}</Context.Provider>;\r\n};\r\n\r\nexport default Context;\r\n","import React from \"react\";\nimport Bot from \"./components/Bot\";\nimport { DataContext } from \"./contexts/dataContext\";\n\nconst App = () => {\n  return (\n    <DataContext>\n      <Bot />\n    </DataContext>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nimport \"./App.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}